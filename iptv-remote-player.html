<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📺 مشغل قناة مباشرة</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.3.6/shaka-player.compiled.min.js"></script>
    <style>
        body, html { margin: 0; padding: 0; height: 100%; background: black; }
        #videoContainer { width: 100vw; height: 100vh; display: flex; justify-content: center; align-items: center; background: black; }
        video { width: 100%; height: 100%; object-fit: cover; }
    </style>
</head>
<body>
    <div id="videoContainer">
        <video id="videoPlayer" autoplay muted></video>
    </div>
    <script>
        const channels = [
            { name: "SSC 1", url: "https://ssc-1-enc.edgenextcdn.net/out/v1/c696e4819b55414388a1a487e8a45ca1/index.mpd", license: "d84c325f36814f39bbe59080272b10c3:550727de4c96ef1ecff874905493580f" },
            { name: "SSC 2", url: "https://ssc-2-enc.edgenextcdn.net/out/v1/a16db2ec338a445a82d9c541cc9293f9/index.mpd", license: "8bcfc55359e24bd7ad1c5560a96ddd3c:b5dcf721ab522af92a9d3bf0bd55b596" },
            { name: "SSC 3", url: "https://ssc-3-enc.edgenextcdn.net/out/v1/42e86125555242aaa2a12056832e7814/index.mpd", license: "7de5dd08ad8041d586c2f16ccc9490a1:5e1503f3398b34f5099933fedab847ef" }
            // أضف باقي القنوات إذا رغبت
        ];

        const video = document.getElementById('videoPlayer');
        const player = new shaka.Player(video);

        function getQueryParam(param) {
            const params = new URLSearchParams(window.location.search);
            return params.get(param);
        }

        function enterFullscreen() {
            const container = document.getElementById('videoContainer');
            if (container.requestFullscreen) container.requestFullscreen();
            else if (container.webkitRequestFullscreen) container.webkitRequestFullscreen();
            else if (container.msRequestFullscreen) container.msRequestFullscreen();
        }

        function playChannel(channelName) {
            const channel = channels.find(c => c.name === channelName);
            if (!channel) {
                alert("القناة غير موجودة.");
                return;
            }
            player.configure({ drm: { clearKeys: { [channel.license.split(":")[0]]: channel.license.split(":")[1] } } });
            player.load(channel.url).then(() => {
                enterFullscreen();
            }).catch(err => console.error("فشل في تحميل القناة:", err));
        }

        const channelFromURL = getQueryParam("channel");
        if (channelFromURL) playChannel(channelFromURL);
        else alert("يرجى تحديد اسم القناة في الرابط. مثال: ?channel=SSC+1");
    </script>
</body>
</html>
