<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siksa Player Pro - DZ</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.15.9/shaka-player.ui.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.15.9/controls.min.css" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #container { width: 100%; height: 100%; }
        video { width: 100%; height: 100%; }
        #loader { position: absolute; z-index: 10; text-align: center; color: white; font-family: sans-serif; }
        .spinner { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #ff6b35; border-radius: 50%; width: 45px; height: 45px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <p id="status">Ø¬Ø§Ø±ÙŠ ØªØ´ØºÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©.. ØªØ­ÙŠØ§ Ø§Ù„Ø¬Ø²Ø§Ø¦Ø± ðŸ‡©ðŸ‡¿</p>
    </div>

    <div id="container" data-shaka-player-container>
        <video id="video" autoplay crossorigin="anonymous"></video>
    </div>

    <script>
        // Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù‚Ù†ÙˆØ§Øª Ø§Ù„Ù…Ø­Ø¯Ø«Ø©
        const channels = {
            "shahid-sports-1": {
                url: "https://shahid-sports-1-enc.edgenextcdn.net/out/v1/0169cfa282614ebe97ef0201da87bb04/index.mpd",
                key: "ab081a704aad41829b1123b09b6ecafd:dd51609092fff15e68b91debf5d591f9"
            },
            "bein_max1": {
                url: "https://beinsports-max1.akamaized.net/out/v1/69646b755f3131303030303030303030/index.mpd",
                key: "69646b755f3131303030303030303030:a9e3d5b2c1f4e7d8a0c9b8a7f6e5d4c3"
            },
            "La_Une": {
                url: "https://c9851ec-rbm-hilv-fsly.cdn.redbee.live/L26/669bb376/9069a322.isml/.mpd",
                key: "cbdd636bb2e44f1fa6ebd41f46a3cc52:e6ab6c56a79962dcab612e9dc4fea986"
            },
            "ssc1": {
                url: "https://shls-ssc-1-prod-dub.shahid.net/out/v1/index.mpd",
                key: "4504f76274b74548b898f090d8109672:368d1890e035f5835697693630f9a265"
            }
        };

        async function init() {
            const video = document.getElementById('video');
            const container = document.getElementById('container');
            const status = document.getElementById('status');
            const player = new shaka.Player(video);
            
            // Ø¥Ø¶Ø§ÙØ© ÙˆØ§Ø¬Ù‡Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
            const ui = new shaka.ui.Overlay(player, container, video);

            const id = new URLSearchParams(window.location.search).get('id');
            const channel = channels[id];

            if (!channel) {
                status.innerText = "âŒ Ø§Ù„Ù‚Ù†Ø§Ø© ØºÙŠØ± Ù…ÙˆØ¬ÙˆØ¯Ø©";
                return;
            }

            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ù€ DRM ÙˆØ§Ù„Ø´Ø¨ÙƒØ© Ø§Ù„Ù…ØªÙ‚Ø¯Ù…Ø©
            player.configure({
                drm: {
                    clearKeys: channel.key ? { [channel.key.split(':')[0]]: channel.key.split(':')[1] } : {}
                },
                streaming: {
                    jumpLargeGaps: true,
                    lowLatencyMode: true,
                    rebufferingGoal: 2
                }
            });

            // ÙÙ„ØªØ± Ø§Ù„Ø´Ø¨ÙƒØ© Ù„Ø­Ù„ Ù…Ø´ÙƒÙ„Ø© Shahid
            player.getNetworkingEngine().registerRequestFilter((type, request) => {
                if (type === shaka.net.NetworkingEngine.RequestType.MANIFEST) {
                    // Ù…Ø­Ø§ÙƒØ§Ø© Ù…ØªØµÙØ­ Ø­Ù‚ÙŠÙ‚ÙŠ Ù„ØªØ¬Ù†Ø¨ Ø§Ù„Ø±ÙØ¶ Ù…Ù† Ø³ÙŠØ±ÙØ±Ø§Øª Shahid
                    request.headers['User-Agent'] = navigator.userAgent;
                }
            });

            try {
                await player.load(channel.url);
                document.getElementById('loader').style.display = 'none';
            } catch (e) {
                console.error("Error Detail:", e);
                status.innerText = "âš ï¸ ÙØ´Ù„ Ø§Ù„ØªØ´ØºÙŠÙ„.. ØªØ£ÙƒØ¯ Ù…Ù† ØµÙ„Ø§Ø­ÙŠØ© Ø§Ù„Ù…ÙØ§ØªÙŠØ­";
            }
        }

        document.addEventListener('shaka-ui-loaded', init);
        document.addEventListener('DOMContentLoaded', () => { if(!window.shaka) init(); });
    </script>
</body>
</html>
