<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Siksa Player - beIN Edition</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.15.9/shaka-player.ui.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.15.9/controls.min.css" rel="stylesheet">
    <style>
        body { margin: 0; background: #000; height: 100vh; display: flex; align-items: center; justify-content: center; overflow: hidden; }
        #container { width: 100%; height: 100%; }
        video { width: 100%; height: 100%; }
        #loader { position: absolute; z-index: 10; text-align: center; color: white; font-family: sans-serif; }
        .spinner { border: 4px solid rgba(255,255,255,0.1); border-top: 4px solid #00df88; border-radius: 50%; width: 45px; height: 45px; animation: spin 1s linear infinite; margin: 0 auto 10px; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader">
        <div class="spinner"></div>
        <p id="status">جاري الاتصال بـ beIN Sports...</p>
    </div>

    <div id="container" data-shaka-player-container>
        <video id="video" autoplay crossorigin="anonymous"></video>
    </div>

    <script>
        // --- قسم القنوات: يمكنك إضافة أو تعديل الروابط هنا ---
        const channels = {
            "La_Une": {
                url: "https://c9851ec-rbm-hilv-fsly.cdn.redbee.live/L26/669bb376/9069a322.isml/.mpd",
                key: "cbdd636bb2e44f1fa6ebd41f46a3cc52:e6ab6c56a79962dcab612e9dc4fea986"
            },
            "Матч!_2": {
                url: "https://video.beeline.tv/live/d/channel320.isml/manifest-stb.mpd",
                key: "ce7cf9b28d1a8d874accebc44d7e1fcd:cda18d4d20abd5cc778315abe277feb9"
            },
            "bein3": {
                url: "https://beinsports-3.akamaized.net/out/v1/69646b755f3330303030303030303030/index.mpd",
                key: "69646b755f3330303030303030303030:e4a2359b05563399f1d9adfce641724a"
            },
            "ssc1": {
                url: "https://shls-ssc-1-prod-dub.shahid.net/out/v1/index.mpd",
                key: "4504f76274b74548b898f090d8109672:368d1890e035f5835697693630f9a265"
            }
        };

        async function init() {
            const video = document.getElementById('video');
            const container = document.getElementById('container');
            const status = document.getElementById('status');
            const player = new shaka.Player(video);
            new shaka.ui.Overlay(player, container, video);

            const id = new URLSearchParams(window.location.search).get('id');
            const channel = channels[id];

            if (!channel) {
                status.innerText = "❌ القناة غير متوفرة حالياً";
                return;
            }

            if (channel.key) {
                const [kid, key] = channel.key.split(':');
                player.configure({ drm: { clearKeys: { [kid]: key } } });
            }

            player.configure({
                streaming: { bufferingGoal: 10, lowLatencyMode: true }
            });

            try {
                await player.load(channel.url);
                document.getElementById('loader').style.display = 'none';
            } catch (e) {
                status.innerText = "⚠️ فشل تشغيل البث، قد يكون الرابط منتهياً";
            }
        }

        document.addEventListener('shaka-ui-loaded', init);
        document.addEventListener('DOMContentLoaded', () => { if(!window.shaka) init(); });
    </script>
</body>
</html>
