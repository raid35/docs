<!DOCTYPE html>
<html lang="ar">
<head>
    <meta charset="UTF-8">
    <title>Siksa TV - Pro Player</title>
    <meta name="referrer" content="no-referrer" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    
    <script src="https://ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
    <script>jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>
    
    <style>
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; background-color: black; overflow: hidden; }
        #jwplayerDiv { width: 100% !important; height: 100% !important; }
    </style>
</head>
<body>

    <div id="jwplayerDiv"></div>

    <script>
        // --- 1. تزوير الهوية (الخدعة التي تجعل Shahid والروابط الأخرى تعمل) ---
        (function() {
            var originalFetch = window.fetch;
            var originalXHR = window.XMLHttpRequest;
            var customUA = "Mozilla/5.0 (Smart-TV; Linux; Tizen 6.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/85.0.4183.102 TV Safari/537.36";
            
            window.fetch = function(url, options) {
                options = options || {};
                options.headers = options.headers || {};
                options.headers['User-Agent'] = customUA;
                return originalFetch.call(this, url, options);
            };

            var XHROpen = originalXHR.prototype.open;
            originalXHR.prototype.open = function(method, url) {
                XHROpen.apply(this, arguments);
                this.setRequestHeader('User-Agent', customUA);
            };
        })();

        // --- 2. قائمة القنوات الشاملة ---
        const channelList = {
            "BEIN2": {
                url: "https://aba5sdmaaaaaaaamdwujas5g6mg4r.otte.live.cf.ww.aiv-cdn.net/syd-nitro/live/clients/dash/enc/8m8cd46i1t/out/v1/83985c68e4174e90a58a1f2c024be4c9/cenc.mpd",
                k1: "0b42be2664d7e811d04f3e504e0924c5",
                k2: "ae24090123b8c72ac5404dc152847cb8"
            },
            "BEIN3": {
                url: "https://aba5sdmaaaaaaaamhq2w5oosrf5ae.otte.live.cf.ww.aiv-cdn.net/syd-nitro/live/clients/dash/enc/q4u5nwaogz/out/v1/18de6d3e65934f3a8de4358e69eab86c/cenc.mpd",
                k1: "7995c724a13748ed970840a8ab5bb9b3",
                k2: "67bdaf1e2175b9ff682fcdf0e2354b1e"
            },
            "shahid-sports-1": {
                url: "https://shahid-sports-1-enc.edgenextcdn.net/out/v1/0169cfa282614ebe97ef0201da87bb04/index.mpd",
                k1: "ab081a704aad41829b1123b09b6ecafd",
                k2: "dd51609092fff15e68b91debf5d591f9"
            },
            "sps1": {
                url: "https://sps1.starzplayarabia.com/out/v1/eee188845e9543699fd24e5a9890c6e2/index.mpd",
                k1: "b253c726c24c7c94a3ddf9b1907e2c76",
                k2: "097963d6ad73c3d712a104981de0ed42"
            },
            "La_Une": {
                url: "https://c9851ec-rbm-hilv-fsly.cdn.redbee.live/L26/669bb376/9069a322.isml/.mpd",
                k1: "cbdd636bb2e44f1fa6ebd41f46a3cc52",
                k2: "e6ab6c56a79962dcab612e9dc4fea986"
            },
            "sky_football": {
                url: "https://abe4mdzaaaaaaaampzanwc57oxzti.otte.live.cf.ww.aiv-cdn.net/lhr-nitro/live/clients/dash/enc/9o6jmlyjpm/out/v1/ad80a9bfecc6438f82f2af41c58d7fb8/cenc.mpd",
                k1: "ca4316630f56d6f33e9ff73b7ad211d1",
                k2: "72c54e5646055f444e99bc1123919e89"
            }
        };

        // --- 3. إعداد المشغل بناءً على ID الرابط ---
        const urlParams = new URLSearchParams(window.location.search);
        const getID = urlParams.get('id') || "BEIN2";
        const selectedChannel = channelList[getID] || channelList["BEIN2"];

        jwplayer("jwplayerDiv").setup({
            file: selectedChannel.url,
            autostart: true,
            stretching: "fill",
            width: "100%",
            height: "100%",
            drm: {
                clearkey: {
                    keyId: selectedChannel.k1,
                    key: selectedChannel.k2
                }
            }
        });

        // اختيار اللغة العربية تلقائياً إذا وجدت
        jwplayer().on('audioTracks', function() {
            const tracks = jwplayer().getAudioTracks();
            tracks.forEach((track, index) => {
                if (track.label.toLowerCase().includes("ara") || track.label.includes("عربي")) {
                    jwplayer().setCurrentAudioTrack(index);
                }
            });
        });
    </script>
</body>
</html>
