<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>Ù…Ø´ØºÙ„ ØªÙ„ÙØ²ÙŠÙˆÙ† Ø§Ø­ØªØ±Ø§ÙÙŠ</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: black;
      overflow: hidden;
    }
    #video {
      width: 100%;
      height: 100%;
      background-color: black;
    }
    #controls {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px;
      transition: opacity 0.5s;
      opacity: 0;
    }
    #controls.visible {
      opacity: 1;
    }
    .btn {
      color: white;
      font-size: 20px;
      padding: 10px;
    }
  </style>
</head>
<body>

<video id="video" autoplay controls></video>

<div id="controls">
  <div class="btn" id="playPause">â¯ï¸ ØªØ´ØºÙŠÙ„/Ø¥ÙŠÙ‚Ø§Ù</div>
  <div class="btn" id="volumeUp">ğŸ”Š ØµÙˆØª â†‘</div>
  <div class="btn" id="volumeDown">ğŸ”‰ ØµÙˆØª â†“</div>
  <div class="btn" id="seekForward">â© ØªÙ‚Ø¯ÙŠÙ…</div>
  <div class="btn" id="seekBackward">âª ØªØ£Ø®ÙŠØ±</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.3.5/dist/shaka-player.compiled.js"></script>
<script>
  const manifestUri = 'https://ssc-news-live-enc.edgenextcdn.net/out/v1/ef466f43623c4bbaa3f905b566ec35ea/index.mpd';
  const clearkeys = {
    '3d04975236a44f62857d181597705ee6': '362133e9cb13189ad4fe095ced216f60'
  };

  const video = document.getElementById('video');
  const controls = document.getElementById('controls');

  async function initPlayer() {
    const player = new shaka.Player(video);

    player.configure({
      drm: { clearKeys: clearkeys }
    });

    try {
      await player.load(manifestUri);
      console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø©');
    } catch (e) {
      console.error('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„:', e);
    }
  }

  shaka.polyfill.installAll();
  if (shaka.Player.isBrowserSupported()) {
    initPlayer();
  } else {
    console.error('Ø§Ù„Ù…ØªØµÙØ­ Ù„Ø§ ÙŠØ¯Ø¹Ù… Shaka Player');
  }

  // Ø¹Ø±Ø¶ ÙˆØ¥Ø®ÙØ§Ø¡ Ø§Ù„Ø´Ø±ÙŠØ· Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø±ÙƒØ©
  let hideTimeout;
  function showControls() {
    controls.classList.add('visible');
    clearTimeout(hideTimeout);
    hideTimeout = setTimeout(() => {
      controls.classList.remove('visible');
    }, 3000); // ÙŠØ®ÙÙŠ Ø¨Ø¹Ø¯ 3 Ø«ÙˆØ§Ù†ÙŠ
  }

  document.addEventListener('keydown', (e) => {
    showControls();
    if (e.code === 'Space' || e.code === 'Enter') {
      togglePlayPause();
    } else if (e.code === 'ArrowUp') {
      volumeUp();
    } else if (e.code === 'ArrowDown') {
      volumeDown();
    } else if (e.code === 'ArrowRight') {
      seekForward();
    } else if (e.code === 'ArrowLeft') {
      seekBackward();
    }
  });

  function togglePlayPause() {
    if (video.paused) {
      video.play();
    } else {
      video.pause();
    }
  }

  function volumeUp() {
    video.volume = Math.min(video.volume + 0.1, 1);
  }

  function volumeDown() {
    video.volume = Math.max(video.volume - 0.1, 0);
  }

  function seekForward() {
    video.currentTime += 10;
  }

  function seekBackward() {
    video.currentTime -= 10;
  }

  document.getElementById('playPause').onclick = togglePlayPause;
  document.getElementById('volumeUp').onclick = volumeUp;
  document.getElementById('volumeDown').onclick = volumeDown;
  document.getElementById('seekForward').onclick = seekForward;
  document.getElementById('seekBackward').onclick = seekBackward;
</script>

</body>
</html>
