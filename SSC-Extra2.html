<!DOCTYPE html>
<html lang="ar">
<head>
  <meta charset="UTF-8">
  <title>مشغل تلفزيون احترافي</title>
  <style>
    html, body {
      margin: 0;
      padding: 0;
      height: 100%;
      background-color: black;
      overflow: hidden;
    }
    #video {
      width: 100%;
      height: 100%;
      background-color: black;
    }
    #controls {
      position: absolute;
      bottom: 0;
      left: 0;
      width: 100%;
      background: rgba(0,0,0,0.5);
      display: flex;
      justify-content: space-around;
      align-items: center;
      padding: 10px;
      transition: opacity 0.5s;
      opacity: 0;
    }
    #controls.visible {
      opacity: 1;
    }
    .btn {
      color: white;
      font-size: 20px;
      padding: 10px;
    }
  </style>
</head>
<body>

<video id="video" autoplay controls></video>

<div id="controls">
  <div class="btn" id="playPause">⏯️ تشغيل/إيقاف</div>
  <div class="btn" id="volumeUp">🔊 صوت ↑</div>
  <div class="btn" id="volumeDown">🔉 صوت ↓</div>
  <div class="btn" id="seekForward">⏩ تقديم</div>
  <div class="btn" id="seekBackward">⏪ تأخير</div>
</div>

<script src="https://cdn.jsdelivr.net/npm/shaka-player@4.3.5/dist/shaka-player.compiled.js"></script>
<script>
  const manifestUri = 'https://ssc-news-live-enc.edgenextcdn.net/out/v1/ef466f43623c4bbaa3f905b566ec35ea/index.mpd';
  const clearkeys = {
    '3d04975236a44f62857d181597705ee6': '362133e9cb13189ad4fe095ced216f60'
  };

  const video = document.getElementById('video');
  const controls = document.getElementById('controls');

  async function initPlayer() {
    const player = new shaka.Player(video);

    player.configure({
      drm: { clearKeys: clearkeys }
    });

    try {
      await player.load(manifestUri);
      console.log('تم تحميل القناة');
    } catch (e) {
      console.error('خطأ في التحميل:', e);
    }
  }

  shaka.polyfill.installAll();
  if (shaka.Player.isBrowserSupported()) {
    initPlayer();
  } else {
    console.error('المتصفح لا يدعم Shaka Player');
  }

  // عرض وإخفاء الشريط عند الحركة
  let hideTimeout;
  function showControls() {
    controls.classList.add('visible');
    clearTimeout(hideTimeout);
    hideTimeout = setTimeout(() => {
      controls.classList.remove('visible');
    }, 3000); // يخفي بعد 3 ثواني
  }

  document.addEventListener('keydown', (e) => {
    showControls();
    if (e.code === 'Space' || e.code === 'Enter') {
      togglePlayPause();
    } else if (e.code === 'ArrowUp') {
      volumeUp();
    } else if (e.code === 'ArrowDown') {
      volumeDown();
    } else if (e.code === 'ArrowRight') {
      seekForward();
    } else if (e.code === 'ArrowLeft') {
      seekBackward();
    }
  });

  function togglePlayPause() {
    if (video.paused) {
      video.play();
    } else {
      video.pause();
    }
  }

  function volumeUp() {
    video.volume = Math.min(video.volume + 0.1, 1);
  }

  function volumeDown() {
    video.volume = Math.max(video.volume - 0.1, 0);
  }

  function seekForward() {
    video.currentTime += 10;
  }

  function seekBackward() {
    video.currentTime -= 10;
  }

  document.getElementById('playPause').onclick = togglePlayPause;
  document.getElementById('volumeUp').onclick = volumeUp;
  document.getElementById('volumeDown').onclick = volumeDown;
  document.getElementById('seekForward').onclick = seekForward;
  document.getElementById('seekBackward').onclick = seekBackward;
</script>

</body>
</html>
