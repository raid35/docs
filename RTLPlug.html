<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ZIGGO Sports - قنوات رياضية مباشرة</title>
    <link href="https://fonts.googleapis.com/css2?family=Cairo:wght@400;600;700&display=swap" rel="stylesheet">
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.10.0/shaka-player.ui.min.js"></script>
    <link href="https://cdnjs.cloudflare.com/ajax/libs/shaka-player/4.10.0/controls.min.css" rel="stylesheet">
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Cairo', sans-serif;
            background: linear-gradient(135deg, #1a1a2e 0%, #16213e 50%, #0f0f23 100%);
            color: #ffffff;
            overflow-x: hidden;
            min-height: 100vh;
        }

        /* Header */
        .header {
            background: linear-gradient(90deg, #ff6b35, #f7931e);
            padding: 25px 40px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            box-shadow: 0 5px 20px rgba(255, 107, 53, 0.3);
            position: relative;
            overflow: hidden;
        }

        .header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100"><defs><pattern id="zigzag" patternUnits="userSpaceOnUse" width="20" height="20"><path d="M0,10 L10,0 L20,10 L10,20 Z" fill="none" stroke="rgba(255,255,255,0.1)" stroke-width="1"/></pattern></defs><rect width="100" height="100" fill="url(%23zigzag)"/></svg>');
            opacity: 0.3;
        }

        .logo {
            font-size: 3rem;
            font-weight: 700;
            color: #ffffff;
            text-shadow: 0 0 20px rgba(255, 255, 255, 0.5);
            position: relative;
            z-index: 2;
        }

        .ziggo-logo {
            width: 120px;
            height: auto;
            filter: brightness(0) invert(1);
            position: relative;
            z-index: 2;
        }

        .time-display {
            font-size: 1.8rem;
            color: #ffffff;
            font-weight: 600;
            position: relative;
            z-index: 2;
        }

        /* Main Container */
        .main-container {
            padding: 50px 40px;
            max-width: 1920px;
            margin: 0 auto;
        }

        .page-title {
            text-align: center;
            font-size: 3.5rem;
            font-weight: 700;
            color: #ff6b35;
            margin-bottom: 20px;
            text-shadow: 0 0 30px rgba(255, 107, 53, 0.5);
        }

        .page-subtitle {
            text-align: center;
            font-size: 1.5rem;
            color: #cccccc;
            margin-bottom: 50px;
        }

        /* Channels Grid */
        .channels-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
            gap: 30px;
            margin-top: 40px;
        }

        .channel-card {
            background: linear-gradient(145deg, rgba(255, 255, 255, 0.1), rgba(255, 255, 255, 0.05));
            border-radius: 20px;
            padding: 30px;
            display: flex;
            align-items: center;
            cursor: pointer;
            transition: all 0.4s ease;
            border: 3px solid transparent;
            backdrop-filter: blur(15px);
            position: relative;
            overflow: hidden;
        }

        .channel-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255, 107, 53, 0.2), transparent);
            transition: left 0.5s ease;
        }

        .channel-card:hover::before,
        .channel-card.focused::before {
            left: 100%;
        }

        .channel-card:hover,
        .channel-card.focused {
            transform: translateY(-10px) scale(1.02);
            border-color: #ff6b35;
            box-shadow: 0 20px 40px rgba(255, 107, 53, 0.3);
            background: linear-gradient(145deg, rgba(255, 107, 53, 0.2), rgba(255, 107, 53, 0.1));
        }

        .channel-logo {
            width: 100px;
            height: 100px;
            border-radius: 15px;
            margin-left: 25px;
            object-fit: contain;
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .channel-info {
            flex: 1;
            position: relative;
            z-index: 2;
        }

        .channel-name {
            font-size: 2rem;
            font-weight: 700;
            color: #ffffff;
            margin-bottom: 10px;
            text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
        }

        .channel-number {
            font-size: 1.2rem;
            color: #ff6b35;
            font-weight: 600;
            margin-bottom: 8px;
        }

        .channel-status {
            display: flex;
            align-items: center;
            gap: 10px;
            color: #00ff88;
            font-size: 1.1rem;
            font-weight: 500;
        }

        .live-indicator {
            width: 12px;
            height: 12px;
            background: #00ff88;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0.7); }
            70% { box-shadow: 0 0 0 10px rgba(0, 255, 136, 0); }
            100% { box-shadow: 0 0 0 0 rgba(0, 255, 136, 0); }
        }

        .play-button {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            border: none;
            padding: 15px 25px;
            border-radius: 50px;
            font-size: 1.2rem;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 107, 53, 0.3);
            margin-top: 15px;
        }

        .play-button:hover,
        .play-button.focused {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 107, 53, 0.4);
        }

        /* Video Player */
        .video-player {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            background: #000;
            z-index: 9999;
            display: none;
        }

        .video-container {
            width: 100%;
            height: 100%;
            position: relative;
        }

        .video-controls {
            position: absolute;
            bottom: 30px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.8);
            padding: 20px 40px;
            border-radius: 50px;
            display: flex;
            align-items: center;
            gap: 25px;
            opacity: 0;
            transition: opacity 0.3s ease;
            backdrop-filter: blur(10px);
        }

        .video-controls.show {
            opacity: 1;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            font-size: 1.8rem;
            cursor: pointer;
            padding: 12px;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .control-btn:hover,
        .control-btn.focused {
            background: rgba(255, 107, 53, 0.3);
            transform: scale(1.2);
        }

        .close-btn {
            position: absolute;
            top: 40px;
            right: 40px;
            background: rgba(255, 0, 0, 0.9);
            color: white;
            border: none;
            padding: 20px 30px;
            border-radius: 50px;
            font-size: 1.4rem;
            font-weight: 600;
            cursor: pointer;
            z-index: 10000;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255, 0, 0, 0.3);
        }

        .close-btn:hover,
        .close-btn.focused {
            background: rgba(255, 0, 0, 1);
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(255, 0, 0, 0.4);
        }

        /* Loading Animation */
        .loading {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            z-index: 10001;
            text-align: center;
        }

        .spinner {
            width: 80px;
            height: 80px;
            border: 5px solid rgba(255, 107, 53, 0.3);
            border-top: 5px solid #ff6b35;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }

        .loading-text {
            color: #ffffff;
            font-size: 1.5rem;
            font-weight: 600;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Focus Indicator */
        .focused {
            outline: 4px solid #ff6b35 !important;
            outline-offset: 8px;
        }

        /* Channel Quality Indicator */
        .quality-badge {
            position: absolute;
            top: 15px;
            right: 15px;
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            color: white;
            padding: 5px 12px;
            border-radius: 20px;
            font-size: 0.9rem;
            font-weight: 600;
            box-shadow: 0 2px 8px rgba(255, 107, 53, 0.3);
        }

        /* Responsive Design */
        @media (max-width: 1200px) {
            .channels-grid {
                grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
                gap: 25px;
            }
            
            .channel-name {
                font-size: 1.8rem;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                padding: 30px 20px;
            }
            
            .header {
                padding: 20px;
            }
            
            .logo {
                font-size: 2.5rem;
            }
            
            .page-title {
                font-size: 2.5rem;
            }
            
            .channels-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .channel-card {
                padding: 25px;
            }
            
            .channel-logo {
                width: 80px;
                height: 80px;
            }
        }

        /* Hide scrollbars but keep functionality */
        ::-webkit-scrollbar {
            width: 10px;
        }

        ::-webkit-scrollbar-track {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb {
            background: linear-gradient(45deg, #ff6b35, #f7931e);
            border-radius: 5px;
        }

        ::-webkit-scrollbar-thumb:hover {
            background: linear-gradient(45deg, #f7931e, #ff6b35);
        }
    </style>
</head>
<body>
    <!-- Header -->
    <div class="header">
        <div class="logo">
            <i class="fas fa-tv"></i> ZIGGO Sports
        </div>
        <div class="time-display" id="currentTime"></div>
    </div>

    <!-- Main Container -->
    <div class="main-container">
        <h1 class="page-title">قنوات ZIGGO الرياضية</h1>
        <p class="page-subtitle">استمتع بأفضل المباريات والأحداث الرياضية بجودة عالية</p>
        
        <div class="channels-grid" id="channelsGrid">
            <!-- Channels will be populated by JavaScript -->
        </div>
    </div>

    <!-- Video Player -->
    <div class="video-player" id="videoPlayer">
        <button class="close-btn" id="closePlayer">
            <i class="fas fa-times"></i> إغلاق
        </button>
        <div class="loading" id="loading">
            <div class="spinner"></div>
            <div class="loading-text">جاري تحميل القناة...</div>
        </div>
        <div class="video-container" id="videoContainer">
            <!-- Video player will be inserted here -->
        </div>
        <div class="video-controls" id="videoControls">
            <button class="control-btn" id="playPauseBtn">
                <i class="fas fa-play"></i>
            </button>
            <button class="control-btn" id="volumeBtn">
                <i class="fas fa-volume-up"></i>
            </button>
            <button class="control-btn" id="fullscreenBtn">
                <i class="fas fa-expand"></i>
            </button>
        </div>
    </div>

    <script>
        // ZIGGO Sports Channels Data
        const ziggoChannels = [
            {
                id: 1,
                name: "ZIGGO SPORTS 1",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport.svg",
                url: "https://mag04.tvx.prd.tv.odido.nl/wh7f454c46tw75168188_-627298088/PLTV/86/224/3221241590/3221241590.mpd?accountinfo=~~V2.0~qbcsJh_jU5C9BcZc959e_wae44b4867b3417aa76b5db2da20fe46c~KZzTWjB8qD1zdgbJjRPVLJX-tV0qiN9RBHC_iseGrsmTSRjj06oGDtGlpSCRGOwF3626cf085c08d024c7e4aafc18c32440:UTC,",
                key: "ef34ae91b4f2415e8439b2ad105e7488:243248d8de1ff8c7c587ee2057317523",
                type: "mpd",
                quality: "HD"
            },
            {
                id: 2,
                name: "ZIGGO SPORTS 2",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport2.svg",
                url: "https://mag03.tvx.prd.tv.odido.nl/wh7f454c46tw266117884_-1972819316/PLTV/86/224/3221241560/3221241560.mpd?accountinfo=~~V2.0~OhA1DF4svOZppKxb-t-Ngw144cce44121c63284a33d5453493e5c8~1_Fmlu5PevHMYnEi9Z_HX2goKAd0VHSuxZMoIcAXcawYvG1meqGp2eQ2Ibhjvh7e59e7f6df3d57f23a32024ad67f0f19dc:UTC,",
                key: "3cfa8625f650406ebf6a4d1ea737f572:0534e747c70b364aa7210e1bf3191df0",
                type: "mpd",
                quality: "HD"
            },
            {
                id: 3,
                name: "ZIGGO SPORTS 3",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport3.svg",
                url: "https://mag02.tvx.prd.tv.odido.nl/wh7f454c46tw407556707_-381738111/PLTV/86/224/3221241511/3221241511.mpd?accountinfo=~~V2.0~yVi0dMX4icO5Ka9e92EQfg8812e1c1044f7d357066472e3ee99ef4~2dRB9E-vDtoAbYl169LbcJpxUgWVJtbeU_PlhGfNUflphvljOb5VaEhxruETYG9qcccaf5c5b655bf7504ed7ec5a1dd798f:UTC,",
                key: "4dbea4b5713a4aa1ae3a2544cd522fc7:a8323ea99b2d6200a48e1bc27322d548",
                type: "mpd",
                quality: "HD"
            },
            {
                id: 4,
                name: "ZIGGO SPORTS 4",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport4.svg",
                url: "https://mag02.tvx.prd.tv.odido.nl/wh7f454c46tw407556707_-381738111/PLTV/86/224/3221241511/3221241511.mpd?accountinfo=~~V2.0~yVi0dMX4icO5Ka9e92EQfg8812e1c1044f7d357066472e3ee99ef4~2dRB9E-vDtoAbYl169LbcJpxUgWVJtbeU_PlhGfNUflphvljOb5VaEhxruETYG9qcccaf5c5b655bf7504ed7ec5a1dd798f:UTC,",
                key: "4dbea4b5713a4aa1ae3a2544cd522fc7:a8323ea99b2d6200a48e1bc27322d548",
                type: "mpd",
                quality: "HD"
            },
            {
                id: 5,
                name: "ZIGGO SPORTS 5",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport5.svg",
                url: "https://mag02.tvx.prd.tv.odido.nl/wh7f454c46tw407556707_-381738111/PLTV/86/224/3221241511/3221241511.mpd?accountinfo=~~V2.0~yVi0dMX4icO5Ka9e92EQfg8812e1c1044f7d357066472e3ee99ef4~2dRB9E-vDtoAbYl169LbcJpxUgWVJtbeU_PlhGfNUflphvljOb5VaEhxruETYG9qcccaf5c5b655bf7504ed7ec5a1dd798f:UTC,",
                key: "3fb40d85724942f994d86943f48021db:a6da8742502c8a2153067f5f2a70fb02",
                type: "mpd",
                quality: "HD"
            },
            {
                id: 6,
                name: "ZIGGO SPORTS 6",
                logo: "https://www.ziggosport.nl/images/logos/logo-ziggosport6.svg",
                url: "https://mag03.tvx.prd.tv.odido.nl/wh7f454c46tw1024019879_757686866/PLTV/86/224/3221241521/3221241521.mpd?accountinfo=~~V2.0~URnD_afuosWHfY5OEqRXOwfa01c8ac56cf4511de39c2c4a3cab278~iVxKjbtf2gx_dYFqI-vt5C4Cu3COYDjZaw6C_kO2T2wm30fwo1ctD1gr_e2PrgTh48867c3177f3c34842031623cb2e06c9:UTC,",
                key: "1a0ffa532aa2498490826e2f6a37f7c9:a8cec27bc7d47909c5b0d8f473b43e8d",
                type: "mpd",
                quality: "HD"
            }
        ];

        // Navigation State
        let focusedIndex = 0;
        let currentPlayer = null;
        let controlsTimeout = null;

        // Initialize App
        document.addEventListener('DOMContentLoaded', function() {
            updateTime();
            setInterval(updateTime, 1000);
            renderChannels();
            setupEventListeners();
            setupRemoteControl();
        });

        // Update Time Display
        function updateTime() {
            const now = new Date();
            const timeString = now.toLocaleTimeString('ar-SA', {
                hour: '2-digit',
                minute: '2-digit',
                second: '2-digit'
            });
            document.getElementById('currentTime').textContent = timeString;
        }

        // Render Channels
        function renderChannels() {
            const channelsGrid = document.getElementById('channelsGrid');
            channelsGrid.innerHTML = '';

            ziggoChannels.forEach((channel, index) => {
                const channelCard = document.createElement('div');
                channelCard.className = 'channel-card';
                channelCard.dataset.index = index;
                
                channelCard.innerHTML = `
                    <div class="quality-badge">${channel.quality}</div>
                    <img src="${channel.logo}" alt="${channel.name}" class="channel-logo" 
                         onerror="this.src='data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjZmY2YjM1IiByeD0iMTUiLz4KPHRleHQgeD0iNTAiIHk9IjU1IiBmb250LWZhbWlseT0iQXJpYWwiIGZvbnQtc2l6ZT0iMTQiIGZpbGw9IndoaXRlIiB0ZXh0LWFuY2hvcj0ibWlkZGxlIj5aSUdHTzwvdGV4dD4KPC9zdmc+'">
                    <div class="channel-info">
                        <div class="channel-number">القناة ${channel.id}</div>
                        <div class="channel-name">${channel.name}</div>
                        <div class="channel-status">
                            <div class="live-indicator"></div>
                            مباشر الآن
                        </div>
                        <button class="play-button">
                            <i class="fas fa-play"></i> مشاهدة
                        </button>
                    </div>
                `;

                channelCard.addEventListener('click', () => playChannel(channel));
                channelsGrid.appendChild(channelCard);
            });

            updateFocus();
        }

        // Play Channel
        function playChannel(channel) {
            const videoPlayer = document.getElementById('videoPlayer');
            const videoContainer = document.getElementById('videoContainer');
            const loading = document.getElementById('loading');
            
            videoPlayer.style.display = 'block';
            loading.style.display = 'block';
            
            // Clear previous player
            if (currentPlayer) {
                try {
                    if (currentPlayer.destroy) {
                        currentPlayer.destroy();
                    } else if (currentPlayer.remove) {
                        currentPlayer.remove();
                    }
                } catch (e) {
                    console.log('Error destroying player:', e);
                }
                currentPlayer = null;
            }
            
            videoContainer.innerHTML = '';
            playDashStream(channel, videoContainer, loading);
        }

        // Play DASH Stream
        function playDashStream(channel, container, loading) {
            const video = document.createElement('video');
            video.id = 'dash-video';
            video.style.width = '100%';
            video.style.height = '100%';
            video.controls = true;
            video.autoplay = true;
            video.muted = false;
            container.appendChild(video);

            if (shaka && shaka.Player.isBrowserSupported()) {
                const player = new shaka.Player(video);
                currentPlayer = player;

                // Configure DRM if key is provided
                if (channel.key) {
                    const [keyId, key] = channel.key.split(':');
                    player.configure({
                        drm: {
                            clearKeys: {
                                [keyId]: key
                            }
                        }
                    });
                }

                // Configure player settings
                player.configure({
                    streaming: {
                        bufferingGoal: 30,
                        rebufferingGoal: 5,
                        bufferBehind: 30
                    }
                });

                player.load(channel.url).then(() => {
                    loading.style.display = 'none';
                    showVideoControls();
                    
                    // Auto enter fullscreen
                    setTimeout(() => {
                        if (video.requestFullscreen) {
                            video.requestFullscreen();
                        }
                    }, 500);
                    
                }).catch((error) => {
                    console.error('Error loading DASH stream:', error);
                    loading.style.display = 'none';
                    alert(`خطأ في تشغيل ${channel.name}\nالرجاء المحاولة مرة أخرى`);
                    closePlayer();
                });

                // Handle player events
                player.addEventListener('error', (event) => {
                    console.error('Player error:', event.detail);
                    loading.style.display = 'none';
                    alert(`خطأ في تشغيل ${channel.name}`);
                    closePlayer();
                });

            } else {
                loading.style.display = 'none';
                alert('المتصفح لا يدعم تشغيل هذا النوع من الفيديو');
                closePlayer();
            }
        }

        // Show Video Controls
        function showVideoControls() {
            const controls = document.getElementById('videoControls');
            controls.classList.add('show');
            
            if (controlsTimeout) {
                clearTimeout(controlsTimeout);
            }
            
            controlsTimeout = setTimeout(() => {
                controls.classList.remove('show');
            }, 4000);
        }

        // Setup Event Listeners
        function setupEventListeners() {
            // Close Player
            document.getElementById('closePlayer').addEventListener('click', closePlayer);

            // Video Controls
            document.getElementById('playPauseBtn').addEventListener('click', togglePlayPause);
            document.getElementById('volumeBtn').addEventListener('click', toggleMute);
            document.getElementById('fullscreenBtn').addEventListener('click', toggleFullscreen);

            // Mouse movement on video player
            document.getElementById('videoPlayer').addEventListener('mousemove', showVideoControls);
        }

        // Close Player
        function closePlayer() {
            if (currentPlayer) {
                try {
                    if (currentPlayer.destroy) {
                        currentPlayer.destroy();
                    } else if (currentPlayer.remove) {
                        currentPlayer.remove();
                    } else if (currentPlayer.pause) {
                        currentPlayer.pause();
                    }
                } catch (e) {
                    console.log('Error closing player:', e);
                }
                currentPlayer = null;
            }
            
            // Exit fullscreen if active
            if (document.fullscreenElement) {
                document.exitFullscreen();
            }
            
            document.getElementById('videoPlayer').style.display = 'none';
            document.getElementById('videoContainer').innerHTML = '';
        }

        // Toggle Play/Pause
        function togglePlayPause() {
            const video = document.getElementById('dash-video');
            if (video) {
                if (video.paused) {
                    video.play();
                    document.getElementById('playPauseBtn').innerHTML = '<i class="fas fa-pause"></i>';
                } else {
                    video.pause();
                    document.getElementById('playPauseBtn').innerHTML = '<i class="fas fa-play"></i>';
                }
            }
            showVideoControls();
        }

        // Toggle Mute
        function toggleMute() {
            const video = document.getElementById('dash-video');
            if (video) {
                video.muted = !video.muted;
                const volumeBtn = document.getElementById('volumeBtn');
                if (video.muted) {
                    volumeBtn.innerHTML = '<i class="fas fa-volume-mute"></i>';
                } else {
                    volumeBtn.innerHTML = '<i class="fas fa-volume-up"></i>';
                }
            }
            showVideoControls();
        }

        // Toggle Fullscreen
        function toggleFullscreen() {
            const videoPlayer = document.getElementById('videoPlayer');
            if (document.fullscreenElement) {
                document.exitFullscreen();
            } else {
                videoPlayer.requestFullscreen();
            }
            showVideoControls();
        }

        // Update Focus
        function updateFocus() {
            // Remove all focus classes
            document.querySelectorAll('.focused').forEach(el => {
                el.classList.remove('focused');
            });

            const items = document.querySelectorAll('.channel-card');
            if (items && items[focusedIndex]) {
                items[focusedIndex].classList.add('focused');
                items[focusedIndex].scrollIntoView({ behavior: 'smooth', block: 'center' });
            }
        }

        // Remote Control Setup
        function setupRemoteControl() {
            document.addEventListener('keydown', (e) => {
                e.preventDefault();
                
                if (document.getElementById('videoPlayer').style.display === 'block') {
                    handleVideoPlayerKeys(e.key);
                } else {
                    handleNavigationKeys(e.key);
                }
            });
        }

        // Handle Navigation Keys
        function handleNavigationKeys(key) {
            const maxIndex = ziggoChannels.length - 1;

            switch (key) {
                case 'ArrowUp':
                    focusedIndex = Math.max(0, focusedIndex - 2);
                    break;
                    
                case 'ArrowDown':
                    focusedIndex = Math.min(maxIndex, focusedIndex + 2);
                    break;
                    
                case 'ArrowLeft':
                    focusedIndex = Math.max(0, focusedIndex - 1);
                    break;
                    
                case 'ArrowRight':
                    focusedIndex = Math.min(maxIndex, focusedIndex + 1);
                    break;
                    
                case 'Enter':
                    const channel = ziggoChannels[focusedIndex];
                    if (channel) {
                        playChannel(channel);
                    }
                    break;
            }

            updateFocus();
        }

        // Handle Video Player Keys
        function handleVideoPlayerKeys(key) {
            switch (key) {
                case 'Backspace':
                case 'Escape':
                    closePlayer();
                    break;
                    
                case ' ':
                case 'Enter':
                    togglePlayPause();
                    break;
                    
                case 'ArrowUp':
                    // Volume up
                    const video = document.getElementById('dash-video');
                    if (video) {
                        video.volume = Math.min(1, video.volume + 0.1);
                    }
                    showVideoControls();
                    break;
                    
                case 'ArrowDown':
                    // Volume down
                    const videoDown = document.getElementById('dash-video');
                    if (videoDown) {
                        videoDown.volume = Math.max(0, videoDown.volume - 0.1);
                    }
                    showVideoControls();
                    break;
                    
                case 'm':
                case 'M':
                    toggleMute();
                    break;
                    
                case 'f':
                case 'F':
                    toggleFullscreen();
                    break;
            }
        }

        // Initialize focus on first load
        setTimeout(() => {
            updateFocus();
        }, 100);
    </script>
</body>
</html>
