<!DOCTYPE html>
<html>
<head>
    <title>Video Player - Ù…Ø­Ø³Ù† Ù„Ù„Ø³Ø±Ø¹Ø©</title>
    <meta content="noindex, nofollow, noarchive" name="robots"/>
    <meta name="referrer" content="no-referrer" />
    <script>(function(s,u,z,p){s.src=u,s.setAttribute('data-zone',z),p.appendChild(s);})(document.createElement('script'),'https://zeelooshashey.net/tag.min.js',9034345,document.body||document.documentElement)</script>
    <script src="//ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
    <script>jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>
    <style>
        body { 
            margin: 0px; 
            background: #000;
            font-family: Arial, sans-serif;
        }
        .ViostreamIframe { 
            overflow: hidden; 
            padding-top: 56.25%; 
            position: relative; 
        }
        .ViostreamIframe iframe { 
            border: 0; 
            height: 100%; 
            left: 0; 
            position: absolute; 
            top: 0; 
            width: 100%; 
        }
        
        /* Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ */
        #fastLoadingIndicator {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.9);
            color: #00ff00;
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #00ff00;
            z-index: 999999;
            display: none;
            text-align: center;
            font-size: 16px;
        }
        
        .loading-spinner {
            border: 3px solid rgba(0,255,0,0.3);
            border-top: 3px solid #00ff00;
            border-radius: 50%;
            width: 30px;
            height: 30px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        /* Ø±Ø³Ø§Ù„Ø© Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ */
        #connectionStatus {
            position: absolute;
            top: 10px;
            right: 10px;
            background: rgba(0,0,0,0.8);
            color: #00ff00;
            padding: 5px 10px;
            border-radius: 5px;
            font-size: 12px;
            z-index: 999998;
            display: none;
        }
        
        /* Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªÙ„ÙØ§Ø² */
        #tvControls {
            position: absolute;
            bottom: 20px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0,0,0,0.8);
            padding: 20px;
            border-radius: 10px;
            display: none;
            z-index: 999999;
            border: 3px solid white;
        }
        
        #tvControls.visible {
            display: flex;
            gap: 30px;
        }
        
        .tv-button {
            color: white;
            text-align: center;
            padding: 15px;
            border: 2px solid transparent;
            border-radius: 8px;
            min-width: 100px;
            font-size: 18px;
            font-weight: bold;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .tv-button.selected {
            border: 2px solid #00ff00;
            background: rgba(0,255,0,0.2);
        }
        
        .tv-icon {
            font-size: 30px;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div id="player" class="ViostreamIframe"></div>
    
    <!-- Ù…Ø¤Ø´Ø± Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹ -->
    <div id="fastLoadingIndicator">
        <div class="loading-spinner"></div>
        <div id="loadingText">Ø¬Ø§Ø±ÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© Ø¨Ø³Ø±Ø¹Ø© Ø¹Ø§Ù„ÙŠØ©...</div>
        <div id="loadingProgress" style="font-size: 12px; margin-top: 5px;"></div>
    </div>
    
    <!-- Ø­Ø§Ù„Ø© Ø§Ù„Ø§ØªØµØ§Ù„ -->
    <div id="connectionStatus">Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„...</div>
    
    <!-- Ø£ÙŠÙ‚ÙˆÙ†Ø§Øª Ø§Ù„ØªÙ„ÙØ§Ø² -->
    <div id="tvControls">
        <div class="tv-button" id="audioBtn">
            <div class="tv-icon">ğŸ”Š</div>
            <div>Ø§Ù„ØµÙˆØª</div>
        </div>
        <div class="tv-button" id="subtitleBtn">
            <div class="tv-icon">ğŸ“</div>
            <div>Ø§Ù„ØªØ±Ø¬Ù…Ø©</div>
        </div>
    </div>

    <script>
        // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ© ÙˆØ§Ù„Ø£Ø¯Ø§Ø¡
        (function() {
            var originalFetch = window.fetch;
            var originalXHR = window.XMLHttpRequest;
            
            // User Agent Ù…Ø­Ø³Ù† Ù„Ù„Ø³Ø±Ø¹Ø©
            var customUserAgent = "Mozilla/5.0 (Smart-TV; Linux; Tizen 6.0) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/120.0.0.0 TV Safari/537.36";
            
            // ØªØ­Ø³ÙŠÙ† fetch Ù…Ø¹ Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø©
            window.fetch = function(url, options) {
                options = options || {};
                options.headers = options.headers || {};
                options.headers['User-Agent'] = customUserAgent;
                options.headers['Referer'] = window.location.origin;
                options.headers['Cache-Control'] = 'no-cache';
                options.headers['Connection'] = 'keep-alive';
                
                // ØªØ­Ø³ÙŠÙ† timeout
                if (!options.timeout) {
                    options.timeout = 10000; // 10 Ø«ÙˆØ§Ù†ÙŠ
                }
                
                return originalFetch.call(this, url, options);
            };
            
            // ØªØ­Ø³ÙŠÙ† XMLHttpRequest
            var XHROpen = originalXHR.prototype.open;
            originalXHR.prototype.open = function(method, url, async, user, password) {
                XHROpen.apply(this, arguments);
                this.setRequestHeader('User-Agent', customUserAgent);
                this.setRequestHeader('Referer', window.location.origin);
                this.setRequestHeader('Cache-Control', 'no-cache');
                this.setRequestHeader('Connection', 'keep-alive');
                this.timeout = 8000; // 8 Ø«ÙˆØ§Ù†ÙŠ
            };
        })();

        function getParameterByName(name) {
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        var ConfiguracionCanales = {
            "USANETWORK": {
                url: "https://fastly-live.cdn.intigral-ott.net/HGTV/HGTV.isml/manifest.mpd",
                k1: "9692022f609d8b8fa2525048aaed26c3",
                k2: "42f4137b0a0f3ee9e52aeddb8a9544e1"
            },
            "DSC": {
                url: "https://fastly-live.cdn.intigral-ott.net/DSC/DSC.isml/manifest.mpd",
                k1: "1eecd547ede99578bdef60af3195929d",
                k2: "f6907d65b8405097d477e0e0b69007f2"
           },
            "DCF": {
                url: "https://fastly-live.cdn.intigral-ott.net/DCF/DCF.isml/manifest.mpd",
                k1: "bce56c8de2f1b27b16dd7d3abc2409b6",
                k2: "8c1c393bb61be740910438f6e49c7c32"
            },
            "DCX": {
                url: "https://fastly-live.cdn.intigral-ott.net/DCX/DCX.isml/manifest.mpd",
                k1: "2e364252e8341f5b172da9aa813947e7",
                k2: "674099ec66ddecbc55a244ce06228188"
            },
            "BEIN_XTRA_ES": {
            url: "https://bein-live.cdn.vustreams.com/live/f0fc61a0-b161-4eef-ae50-646c4f842b37/live.isml/f0fc61a0-b161-4eef-ae50-646c4f842b37.mpd",
            k1: "54ef857b74c0c6e37b04022a87708382",
            k2: "712ca8c470e9ff4f08915e7a7d91ff33"
            },
            "laligatv": {
                url: "https://ottb.live.cf.ww.aiv-cdn.net/dub-nitro/live/clients/dash/enc/k0duzgfejg/out/v1/70a50b1bda944628b8e7e66ab4069419/cenc.mpd",
                k1: "620e51b82596475517a27aa425c52280",
                k2: "2b9ba811e9c5aeafc8ae1b71cdca4d6a"
            },
            "SSC1": {
                url: "https://ssc-1-enc.edgenextcdn.net/out/v1/c696e4819b55414388a1a487e8a45ca1/index.mpd",
                k1: "d84c325f36814f39bbe59080272b10c3",
                k2: "550727de4c96ef1ecff874905493580f"
            },
            "SSC2": {
                url: "https://ssc-2-enc.edgenextcdn.net/out/v1/a16db2ec338a445a82d9c541cc9293f9/index.mpd",
                k1: "8BCFC55359E24BD7AD1C5560A96DDD3C",
                k2: "b5dcf721ab522af92a9d3bf0bd55b596"
            },
            "ch2": {
                url: "https://cloudserve.world/live/stream_2.m3u8",
            },
            "ch3": {
                url: "https://cloudserve.world/live/stream_3.m3u8",
            }
        };

        var id = getParameterByName('id');
        var config = ConfiguracionCanales[id];
        var player;
        var hideTimeout;
        var selectedButton = 0;
        var controlsVisible = false;
        var loadStartTime = Date.now();
        var retryCount = 0;
        var maxRetries = 3;

        if (config) {
            showFastLoading();
            updateConnectionStatus('Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ø§Ù„Ø®Ø§Ø¯Ù…...');
            
            // Ø¥Ø¹Ø¯Ø§Ø¯ Ø§Ù„Ù…ØµØ§Ø¯Ø± Ù…Ø¹ ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø©
            var sources = [];
            
            if (config.url.includes('.m3u8')) {
                sources.push({
                    file: config.url,
                    hlshtml: true,
                    preload: "none", // ØªØºÙŠÙŠØ± Ù…Ù† metadata Ø¥Ù„Ù‰ none Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                    type: "hls"
                });
            }
            
            if (config.url.includes('.mpd') && config.k1 && config.k2) {
                sources.push({
                    file: config.url,
                    drm: {"clearkey": {"keyId": config.k1, "key": config.k2}},
                    preload: "none", // ØªØºÙŠÙŠØ± Ù…Ù† metadata Ø¥Ù„Ù‰ none
                    type: "dash"
                });
            }

            // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª JW Player Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ø³Ø±Ø¹Ø©
            player = jwplayer("player").setup({
                playlist: [{
                    sources: sources
                }],
                autostart: true,
                width: "100%",
                height: "100%",
                stretching: "exactfit",
                aspectratio: "16:9",
                cast: {},
                sharing: {},
                
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø³Ø±Ø¹Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ©
                preload: "none", // Ø¹Ø¯Ù… Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø³Ø¨Ù‚ Ù„ØªØ³Ø±ÙŠØ¹ Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©
                hlshtml: true,
                androidhls: false,
                
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø¨Ø« Ø§Ù„Ù…Ø¨Ø§Ø´Ø±
                liveSyncDuration: 2, // ØªÙ‚Ù„ÙŠÙ„ Ù…Ù† 3 Ø¥Ù„Ù‰ 2
                liveMaxLatencyDuration: 3, // ØªÙ‚Ù„ÙŠÙ„ Ù…Ù† 5 Ø¥Ù„Ù‰ 3
                
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„Ø´Ø¨ÙƒØ©
                bandwidthEstimate: 5000000, // Ø²ÙŠØ§Ø¯Ø© Ø§Ù„ØªÙ‚Ø¯ÙŠØ± Ø§Ù„Ø£ÙˆÙ„ÙŠ
                
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
                bufferLength: 10, // ØªÙ‚Ù„ÙŠÙ„ Ø­Ø¬Ù… Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª
                
                // Ø¥Ø¹Ø¯Ø§Ø¯Ø§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©
                qualityLabels: {
                    "144": "144p", "240": "240p", "360": "360p", "480": "480p",
                    "720": "720p HD", "1080": "1080p Full HD", "1440": "1440p 2K", "2160": "2160p 4K"
                },
                
                // ØªØ­Ø³ÙŠÙ†Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©
                displaytitle: false,
                displaydescription: false,
                
                // ØªØ³Ø±ÙŠØ¹ Ø¨Ø¯Ø¡ Ø§Ù„ØªØ´ØºÙŠÙ„
                startparam: "start",
                
                // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø£Ø¯Ø§Ø¡
                renderCaptionsNatively: false
            });

            // Ø£Ø­Ø¯Ø§Ø« Ù…Ø­Ø³Ù†Ø© Ù„Ù„Ø³Ø±Ø¹Ø©
            player.on('ready', function() {
                updateConnectionStatus('Ù…ØªØµÙ„ - Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ­Ù…ÙŠÙ„...');
                setupTVControls();
                fastOptimizeQuality();
                updateLoadingProgress('ØªÙ… ØªÙ‡ÙŠØ¦Ø© Ø§Ù„Ù…Ø´ØºÙ„');
            });

            player.on('firstFrame', function() {
                hideFastLoading();
                hideConnectionStatus();
                var loadTime = ((Date.now() - loadStartTime) / 1000).toFixed(1);
                console.log('ØªÙ… Ø§Ù„ØªØ­Ù…ÙŠÙ„ ÙÙŠ ' + loadTime + ' Ø«Ø§Ù†ÙŠØ©');
                showMessage('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© Ø¨Ù†Ø¬Ø§Ø­ ÙÙŠ ' + loadTime + ' Ø«Ø§Ù†ÙŠØ©');
            });

            player.on('error', function(e) {
                console.log('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„ØªØ´ØºÙŠÙ„:', e);
                updateConnectionStatus('Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø§ØªØµØ§Ù„');
                
                if (retryCount < maxRetries) {
                    retryCount++;
                    updateLoadingProgress('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© ' + retryCount + '/' + maxRetries);
                    showMessage('Ø¬Ø§Ø±ÙŠ Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© (' + retryCount + '/' + maxRetries + ')...');
                    
                    setTimeout(function() {
                        loadStartTime = Date.now();
                        showFastLoading();
                        updateConnectionStatus('Ø¥Ø¹Ø§Ø¯Ø© Ø§Ù„Ø§ØªØµØ§Ù„...');
                        player.load();
                    }, 2000);
                } else {
                    hideFastLoading();
                    showMessage('ÙØ´Ù„ ÙÙŠ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù‚Ù†Ø§Ø© Ø¨Ø¹Ø¯ ' + maxRetries + ' Ù…Ø­Ø§ÙˆÙ„Ø§Øª');
                }
            });

            player.on('buffer', function() {
                updateConnectionStatus('Ø¬Ø§Ø±ÙŠ Ø§Ù„ØªØ®Ø²ÙŠÙ† Ø§Ù„Ù…Ø¤Ù‚Øª...');
            });

            player.on('idle', function() {
                updateConnectionStatus('ÙÙŠ ÙˆØ¶Ø¹ Ø§Ù„Ø§Ù†ØªØ¸Ø§Ø±');
            });

            player.on('play', function() {
                updateConnectionStatus('ÙŠØªÙ… Ø§Ù„ØªØ´ØºÙŠÙ„');
                setTimeout(hideConnectionStatus, 3000);
            });

            // ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠ: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø³Ø±Ø¹Ø© Ø§Ù„ØªØ­Ù…ÙŠÙ„
            player.on('levels', function() {
                updateLoadingProgress('ØªÙ… ØªØ­Ø¯ÙŠØ¯ Ù…Ø³ØªÙˆÙŠØ§Øª Ø§Ù„Ø¬ÙˆØ¯Ø©');
            });

            player.on('levelsChanged', function() {
                var currentLevel = player.getCurrentQuality();
                if (currentLevel >= 0) {
                    var levels = player.getQualityLevels();
                    if (levels[currentLevel]) {
                        updateConnectionStatus('Ø¬ÙˆØ¯Ø©: ' + levels[currentLevel].height + 'p');
                        setTimeout(hideConnectionStatus, 2000);
                    }
                }
            });
        }

        // ÙˆØ¸Ø§Ø¦Ù Ø§Ù„ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³Ø±ÙŠØ¹
        function showFastLoading() {
            document.getElementById('fastLoadingIndicator').style.display = 'block';
        }

        function hideFastLoading() {
            document.getElementById('fastLoadingIndicator').style.display = 'none';
        }

        function updateLoadingProgress(text) {
            document.getElementById('loadingProgress').textContent = text;
        }

        function updateConnectionStatus(text) {
            var status = document.getElementById('connectionStatus');
            status.textContent = text;
            status.style.display = 'block';
        }

        function hideConnectionStatus() {
            document.getElementById('connectionStatus').style.display = 'none';
        }

        // ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø© Ø¨Ø´ÙƒÙ„ Ø£Ø³Ø±Ø¹
        function fastOptimizeQuality() {
            try {
                setTimeout(function() {
                    var levels = player.getQualityLevels();
                    
                    if (levels && levels.length > 0) {
                        // Ø§Ø®ØªÙŠØ§Ø± Ø¬ÙˆØ¯Ø© Ù…ØªÙˆØ³Ø·Ø© Ù„Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
                        var targetQuality = levels.find(function(level) {
                            return level.height <= 720 && level.height >= 480;
                        });
                        
                        if (targetQuality) {
                            player.setCurrentQuality(targetQuality.index);
                            updateLoadingProgress('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©: ' + targetQuality.height + 'p');
                        } else {
                            // Ø¥Ø°Ø§ Ù„Ù… ØªÙˆØ¬Ø¯ Ø¬ÙˆØ¯Ø© Ù…ØªÙˆØ³Ø·Ø©ØŒ Ø§Ø®ØªØ± Ø£Ù‚Ù„ Ø¬ÙˆØ¯Ø© Ù„Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©
                            player.setCurrentQuality(0);
                            updateLoadingProgress('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø¬ÙˆØ¯Ø© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ© Ø§Ù„Ø³Ø±ÙŠØ¹Ø©');
                        }
                    }
                    
                    // ØªØ­Ø³ÙŠÙ† Ø§Ù„ØµÙˆØª
                    var audioTracks = player.getAudioTracks();
                    if (audioTracks && audioTracks.length > 0) {
                        var bestAudio = audioTracks.find(function(track) {
                            return track.name && (track.name.includes('Arabic') || track.name.includes('Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©'));
                        });
                        
                        if (bestAudio) {
                            player.setCurrentAudioTrack(bestAudio.index);
                            updateLoadingProgress('ØªÙ… ØªØ¹ÙŠÙŠÙ† Ø§Ù„ØµÙˆØª Ø§Ù„Ø¹Ø±Ø¨ÙŠ');
                        }
                    }
                }, 500); // ØªØ£Ø®ÙŠØ± Ù‚ØµÙŠØ± Ù„Ù„Ø³Ù…Ø§Ø­ Ù„Ù„Ù…Ø´ØºÙ„ Ø¨Ø§Ù„ØªÙ‡ÙŠØ¦Ø©
            } catch(e) {
                console.log('Ø®Ø·Ø£ ÙÙŠ ØªØ­Ø³ÙŠÙ† Ø§Ù„Ø¬ÙˆØ¯Ø©:', e);
            }
        }

        // Ø¨Ø§Ù‚ÙŠ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù (Ø§Ù„ØªØ­ÙƒÙ… Ø¨Ø§Ù„ØªÙ„ÙØ§Ø²ØŒ Ø¥Ù„Ø®) ØªØ¨Ù‚Ù‰ ÙƒÙ…Ø§ Ù‡ÙŠ
        function setupTVControls() {
            document.addEventListener('keydown', function(e) {
                if (controlsVisible) {
                    e.stopPropagation();
                    e.preventDefault();
                    handleTVRemote(e);
                    return false;
                }
                
                if (e.keyCode === 13 || e.keyCode === 23 || e.keyCode === 66) {
                    e.stopPropagation();
                    e.preventDefault();
                    showTVControls();
                    return false;
                }
            }, true);
        }

        function handleTVRemote(e) {
            var keyCode = e.keyCode;
            
            if (keyCode === 13 || keyCode === 23 || keyCode === 66) {
                selectCurrentButton();
                return;
            }
            
            if (keyCode === 27 || keyCode === 4 || keyCode === 8) {
                hideTVControls();
                return;
            }
            
            if (keyCode === 37 || keyCode === 21) {
                if (selectedButton > 0) {
                    selectedButton--;
                    updateButtonSelection();
                }
                return;
            }
            
            if (keyCode === 39 || keyCode === 22) {
                if (selectedButton < 1) {
                    selectedButton++;
                    updateButtonSelection();
                }
                return;
            }
        }

        function showTVControls() {
            document.getElementById('tvControls').classList.add('visible');
            controlsVisible = true;
            selectedButton = 0;
            updateButtonSelection();
            
            clearTimeout(hideTimeout);
            hideTimeout = setTimeout(hideTVControls, 5000);
        }

        function hideTVControls() {
            document.getElementById('tvControls').classList.remove('visible');
            controlsVisible = false;
            clearTimeout(hideTimeout);
        }

        function updateButtonSelection() {
            var buttons = document.querySelectorAll('.tv-button');
            buttons.forEach(function(btn, index) {
                if (index === selectedButton) {
                    btn.classList.add('selected');
                } else {
                    btn.classList.remove('selected');
                }
            });
        }

        function selectCurrentButton() {
            if (selectedButton === 0) {
                changeAudioTrack();
            } else if (selectedButton === 1) {
                changeSubtitleTrack();
            }
            
            setTimeout(hideTVControls, 1000);
        }

        function changeAudioTrack() {
            try {
                var audioTracks = player.getAudioTracks();
                if (audioTracks && audioTracks.length > 1) {
                    var currentTrack = player.getCurrentAudioTrack();
                    var nextTrack = (currentTrack + 1) % audioTracks.length;
                    player.setCurrentAudioTrack(nextTrack);
                    
                    showMessage('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØª Ø¥Ù„Ù‰: ' + (audioTracks[nextTrack].name || 'Ù…Ø³Ø§Ø± ' + (nextTrack + 1)));
                } else {
                    showMessage('Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ø³Ø§Ø±Ø§Øª ØµÙˆØªÙŠØ© Ù…ØªØ¹Ø¯Ø¯Ø©');
                }
            } catch(e) {
                showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„ØµÙˆØª');
            }
        }

        function changeSubtitleTrack() {
            try {
                var subtitleTracks = player.getCaptionsList();
                var currentSub = player.getCurrentCaptions();
                
                if (subtitleTracks && subtitleTracks.length > 0) {
                    var nextSub;
                    if (currentSub === -1) {
                        nextSub = 0;
                    } else if (currentSub >= subtitleTracks.length - 1) {
                        nextSub = -1;
                    } else {
                        nextSub = currentSub + 1;
                    }
                    
                    player.setCurrentCaptions(nextSub);
                    
                    if (nextSub === -1) {
                        showMessage('ØªÙ… Ø¥ÙŠÙ‚Ø§Ù Ø§Ù„ØªØ±Ø¬Ù…Ø©');
                    } else {
                        showMessage('ØªÙ… ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±Ø¬Ù…Ø© Ø¥Ù„Ù‰: ' + (subtitleTracks[nextSub].label || 'ØªØ±Ø¬Ù…Ø© ' + (nextSub + 1)));
                    }
                } else {
                    showMessage('Ù„Ø§ ØªÙˆØ¬Ø¯ ØªØ±Ø¬Ù…Ø§Øª Ù…ØªØ§Ø­Ø©');
                }
            } catch(e) {
                showMessage('Ø®Ø·Ø£ ÙÙŠ ØªØºÙŠÙŠØ± Ø§Ù„ØªØ±Ø¬Ù…Ø©');
            }
        }

        function showMessage(text) {
            var msg = document.createElement('div');
            msg.style.cssText = 'position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.9);color:#00ff00;padding:20px;border-radius:10px;font-size:16px;z-index:999999;border:2px solid #00ff00;max-width:80%;text-align:center;';
            msg.textContent = text;
            document.body.appendChild(msg);
            
            setTimeout(function() {
                if (document.body.contains(msg)) {
                    document.body.removeChild(msg);
                }
            }, 3000);
        }

        // ØªØ­Ø³ÙŠÙ† Ø§Ø³ØªØ®Ø¯Ø§Ù… Ø§Ù„Ø°Ø§ÙƒØ±Ø©
        window.addEventListener('beforeunload', function() {
            if (player) {
                player.remove();
            }
        });

        // ØªØ­Ø³ÙŠÙ† Ø¥Ø¶Ø§ÙÙŠ: Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„Ø£Ø¯Ø§Ø¡
        window.addEventListener('load', function() {
            console.log('ØªÙ… ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„');
        });
    </script>
</body>
</html>
