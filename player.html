<!DOCTYPE html>
<html>
<head>
    <title>Video Player</title>
    <meta content="noindex, nofollow, noarchive" name="robots"/>
    <meta name="referrer" content="no-referrer" />
    <script>(function(s,u,z,p){s.src=u,s.setAttribute('data-zone',z),p.appendChild(s);})(document.createElement('script'),'https://zeelooshashey.net/tag.min.js',9034345,document.body||document.documentElement)</script>
    <script src="//ssl.p.jwpcdn.com/player/v/8.26.0/jwplayer.js"></script>
    <script>jwplayer.key = "XSuP4qMl+9tK17QNb+4+th2Pm9AWgMO/cYH8CI0HGGr7bdjo";</script>
    <style>
        body { margin: 0px; }
        .ViostreamIframe { overflow: hidden; padding-top: 56.25%; position: relative; }
        .ViostreamIframe iframe { border: 0; height: 100%; left: 0; position: absolute; top: 0; width: 100%; }
        
        /* أيقونات التحكم - في الأسفل */
        .control-overlay {
            position: fixed;
            bottom: 50px;
            left: 50%;
            transform: translateX(-50%);
            display: none;
            z-index: 9999;
            background: rgba(0, 0, 0, 0.9);
            border-radius: 15px;
            padding: 20px 30px;
            border: 3px solid #fff;
        }
        
        .control-overlay.show {
            display: flex;
            align-items: center;
            gap: 40px;
        }
        
        .control-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            color: white;
            padding: 15px 20px;
            border-radius: 10px;
            min-width: 120px;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .control-item.focused {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid #00ff00;
            transform: scale(1.1);
        }
        
        .control-icon {
            width: 48px;
            height: 48px;
            margin-bottom: 10px;
            fill: currentColor;
        }
        
        .control-label {
            font-size: 16px;
            text-align: center;
            font-weight: bold;
        }
        
        .track-menu {
            position: fixed;
            bottom: 200px;
            left: 50%;
            transform: translateX(-50%);
            background: rgba(0, 0, 0, 0.95);
            border-radius: 10px;
            padding: 15px;
            display: none;
            min-width: 300px;
            max-height: 300px;
            overflow-y: auto;
            border: 2px solid #fff;
        }
        
        .track-menu.show {
            display: block;
        }
        
        .track-option {
            color: white;
            padding: 12px 15px;
            border-radius: 8px;
            font-size: 16px;
            margin: 5px 0;
            border: 2px solid transparent;
            transition: all 0.3s ease;
        }
        
        .track-option.focused {
            background: rgba(255, 255, 255, 0.3);
            border: 2px solid #00ff00;
        }
        
        .track-option.active {
            background: rgba(0, 255, 0, 0.3);
            border: 2px solid #00ff00;
        }
    </style>
</head>
<body>
    <div id="player" class="ViostreamIframe"></div>
    
    <!-- أيقونات التحكم -->
    <div id="controlOverlay" class="control-overlay">
        <div class="control-item" id="audioControl" data-index="0">
            <svg class="control-icon" viewBox="0 0 24 24">
                <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
            </svg>
            <span class="control-label">الصوت</span>
        </div>
        
        <div class="control-item" id="subtitleControl" data-index="1">
            <svg class="control-icon" viewBox="0 0 24 24">
                <path d="M20 4H4c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zM4 12h4v2H4v-2zm10 6H4v-2h10v2zm6 0h-4v-2h4v2zm0-4H10v-2h10v2z"/>
            </svg>
            <span class="control-label">الترجمة</span>
        </div>
    </div>

    <!-- قوائم المسارات -->
    <div id="audioMenu" class="track-menu"></div>
    <div id="subtitleMenu" class="track-menu"></div>

    <script>
        function getParameterByName(name) {
            name = name.replace(/[\[\]]/g, "\\$&");
            var regex = new RegExp("[?&]" + name + "(=([^&#]*)|&|#|$)"),
                results = regex.exec(window.location.href);
            if (!results) return null;
            if (!results[2]) return '';
            return decodeURIComponent(results[2].replace(/\+/g, " "));
        }

        var ConfiguracionCanales = {
            "USANETWORK": {
                url: "https://fastly-live.cdn.intigral-ott.net/HGTV/HGTV.isml/manifest.mpd",
                k1: "9692022f609d8b8fa2525048aaed26c3",
                k2: "42f4137b0a0f3ee9e52aeddb8a9544e1"
            },
            "DSC": {
                url: "https://fastly-live.cdn.intigral-ott.net/DSC/DSC.isml/manifest.mpd",
                k1: "1eecd547ede99578bdef60af3195929d",
                k2: "f6907d65b8405097d477e0e0b69007f2"
           },
            "DCF": {
                url: "https://fastly-live.cdn.intigral-ott.net/DCF/DCF.isml/manifest.mpd",
                k1: "bce56c8de2f1b27b16dd7d3abc2409b6",
                k2: "8c1c393bb61be740910438f6e49c7c32"
            },
            "DCX": {
                url: "https://fastly-live.cdn.intigral-ott.net/DCX/DCX.isml/manifest.mpd",
                k1: "2e364252e8341f5b172da9aa813947e7",
                k2: "674099ec66ddecbc55a244ce06228188"
            },
            "ADSP1": {
                url: "https://sps1.starzplayarabia.com/out/v1/41ff8fde1cd84ed5b30ab8198755356b/index.mpd",
                k1: "b253c726c24c7c94a3ddf9b1907e2c76",
                k2: "097963d6ad73c3d712a104981de0ed42"
                        },
            "temp": {
                url: "https://live12-dash.cdns.cdn.orangetv.orange.es/hpVkPAjFFpE3JSIKY3SY-Q/1727923395/104469517/132089857/87/cmaf/r12_mcampeones/dash_high.mpd",
                k1: "850c1a430396ce4255f3902bf1f4e897",
                k2: "295b1db977f94dfbba012073901a019b"
            },
            "temp2": {
                url: "https://live12-dash.cdns.cdn.orangetv.orange.es/iq4WJaz32_VUr7xNQ9equw/1727923395/104469517/132089857/88/cmaf/r12_mcampeones2/dash_high.mpd",
                k1: "850c1a430396ce4255f3902bf1f4e897",
                k2: "295b1db977f94dfbba012073901a019b"
            },
            "temp3": {
                url: "https://live12-dash.cdns.cdn.orangetv.orange.es/OLkJsl8kjz_zmLTZ6yehxQ/1727923404/104469517/132089857/91/cmaf/r12_mcampeones5/dash_high.mpd",
                k1: "850c1a430396ce4255f3902bf1f4e897",
                k2: "295b1db977f94dfbba012073901a019b"
            },
            "temp4": {
                url: "https://live12-dash.cdns.cdn.orangetv.orange.es/r-VxaiNv4ggV7yG757OzXA/1727923404/104469517/132089857/92/cmaf/r12_mcampeones6/dash_high.mpd",
                k1: "850c1a430396ce4255f3902bf1f4e897",
                k2: "295b1db977f94dfbba012073901a019b"
            },
            "laligatv": {
                url: "https://ottb.live.cf.ww.aiv-cdn.net/dub-nitro/live/clients/dash/enc/k0duzgfejg/out/v1/70a50b1bda944628b8e7e66ab4069419/cenc.mpd",
                k1: "620e51b82596475517a27aa425c52280",
                k2: "2b9ba811e9c5aeafc8ae1b71cdca4d6a"
            },
            "laligahyp": {
                url: "https://ottb.live.cf.ww.aiv-cdn.net/dub-nitro/live/clients/dash/enc/tu06vubgf9/out/v1/7668f47d28e345979c072e361f3d3ce3/cenc.mpd",
                k1: "6d08b265a6639e32da7c880d5491e3d2",
                k2: "0c92556ca14b95f367993710e7cfbc94"
            }
        };

        var id = getParameterByName('id');
        var config = ConfiguracionCanales[id];
        var controlTimeout;
        var currentFocusIndex = 0;
        var menuFocusIndex = 0;
        var isMenuOpen = false;
        var currentMenu = '';
        var player;

        if (config) {
            var sources = [];
            if (config.url.includes('.m3u8')) {
                sources.push({
                    file: config.url
                });
            }
                
            if (config.url.includes('.mpd') && config.k1 && config.k2) {
                sources.push({
                    file: config.url,
                    drm: {"clearkey": {"keyId": config.k1, "key": config.k2}}
                });
            }

            player = jwplayer("player").setup({
                playlist: [{
                    sources: sources
                }],
                autostart: false,
                width: "100%", 
                height: "100%",
                stretching: "exactfit",
                aspectratio: "16:9",
                cast: {},                 
                sharing: {}
            });

            setupRemoteControl();
        }

        function setupRemoteControl() {
            document.addEventListener('keydown', function(e) {
                console.log('Key pressed:', e.key, e.keyCode);
                
                // زر OK أو Enter - إظهار الأيقونات
                if (e.key === 'Enter' || e.keyCode === 13 || e.keyCode === 23) {
                    e.preventDefault();
                    if (!document.getElementById('controlOverlay').classList.contains('show')) {
                        showControls();
                    } else if (isMenuOpen) {
                        selectMenuItem();
                    } else {
                        selectControl();
                    }
                    return;
                }
                
                // زر الخروج
                if (e.key === 'Escape' || e.keyCode === 27 || e.keyCode === 4) {
                    e.preventDefault();
                    if (isMenuOpen) {
                        closeMenu();
                    } else {
                        hideControls();
                    }
                    return;
                }
                
                // الأسهم
                if (e.key === 'ArrowLeft' || e.keyCode === 37 || e.keyCode === 21) {
                    e.preventDefault();
                    if (isMenuOpen) {
                        // لا نفعل شيء في القائمة
                    } else {
                        navigateLeft();
                    }
                    return;
                }
                
                if (e.key === 'ArrowRight' || e.keyCode === 39 || e.keyCode === 22) {
                    e.preventDefault();
                    if (isMenuOpen) {
                        // لا نفعل شيء في القائمة
                    } else {
                        navigateRight();
                    }
                    return;
                }
                
                if (e.key === 'ArrowUp' || e.keyCode === 38 || e.keyCode === 19) {
                    e.preventDefault();
                    if (isMenuOpen) {
                        navigateMenuUp();
                    }
                    return;
                }
                
                if (e.key === 'ArrowDown' || e.keyCode === 40 || e.keyCode === 20) {
                    e.preventDefault();
                    if (isMenuOpen) {
                        navigateMenuDown();
                    }
                    return;
                }
            });
        }

        function showControls() {
            document.getElementById('controlOverlay').classList.add('show');
            currentFocusIndex = 0;
            updateControlFocus();
            
            clearTimeout(controlTimeout);
            controlTimeout = setTimeout(hideControls, 8000);
        }

        function hideControls() {
            document.getElementById('controlOverlay').classList.remove('show');
            closeMenu();
            clearTimeout(controlTimeout);
        }

        function updateControlFocus() {
            const controls = document.querySelectorAll('.control-item');
            controls.forEach((control, index) => {
                if (index === currentFocusIndex) {
                    control.classList.add('focused');
                } else {
                    control.classList.remove('focused');
                }
            });
        }

        function navigateLeft() {
            if (currentFocusIndex > 0) {
                currentFocusIndex--;
                updateControlFocus();
            }
        }

        function navigateRight() {
            const controls = document.querySelectorAll('.control-item');
            if (currentFocusIndex < controls.length - 1) {
                currentFocusIndex++;
                updateControlFocus();
            }
        }

        function selectControl() {
            if (currentFocusIndex === 0) {
                openAudioMenu();
            } else if (currentFocusIndex === 1) {
                openSubtitleMenu();
            }
        }

        function openAudioMenu() {
            closeMenu();
            currentMenu = 'audio';
            isMenuOpen = true;
            menuFocusIndex = 0;
            updateAudioTracks();
            document.getElementById('audioMenu').classList.add('show');
            updateMenuFocus();
        }

        function openSubtitleMenu() {
            closeMenu();
            currentMenu = 'subtitle';
            isMenuOpen = true;
            menuFocusIndex = 0;
            updateSubtitleTracks();
            document.getElementById('subtitleMenu').classList.add('show');
            updateMenuFocus();
        }

        function closeMenu() {
            document.getElementById('audioMenu').classList.remove('show');
            document.getElementById('subtitleMenu').classList.remove('show');
            isMenuOpen = false;
            currentMenu = '';
        }

        function navigateMenuUp() {
            if (menuFocusIndex > 0) {
                menuFocusIndex--;
                updateMenuFocus();
            }
        }

        function navigateMenuDown() {
            const menuId = currentMenu === 'audio' ? 'audioMenu' : 'subtitleMenu';
            const options = document.querySelectorAll(`#${menuId} .track-option`);
            if (menuFocusIndex < options.length - 1) {
                menuFocusIndex++;
                updateMenuFocus();
            }
        }

        function updateMenuFocus() {
            const menuId = currentMenu === 'audio' ? 'audioMenu' : 'subtitleMenu';
            const options = document.querySelectorAll(`#${menuId} .track-option`);
            options.forEach((option, index) => {
                if (index === menuFocusIndex) {
                    option.classList.add('focused');
                } else {
                    option.classList.remove('focused');
                }
            });
        }

        function selectMenuItem() {
            const menuId = currentMenu === 'audio' ? 'audioMenu' : 'subtitleMenu';
            const options = document.querySelectorAll(`#${menuId} .track-option`);
            const selectedOption = options[menuFocusIndex];
            
            if (selectedOption) {
                const trackIndex = parseInt(selectedOption.dataset.index);
                
                if (currentMenu === 'audio') {
                    player.setCurrentAudioTrack(trackIndex);
                    updateAudioTracks();
                } else if (currentMenu === 'subtitle') {
                    player.setCurrentCaptions(trackIndex);
                    updateSubtitleTracks();
                }
                
                closeMenu();
                
                // إعادة تعيين مؤقت الإخفاء
                clearTimeout(controlTimeout);
                controlTimeout = setTimeout(hideControls, 3000);
            }
        }

        function updateAudioTracks() {
            const audioMenu = document.getElementById('audioMenu');
            const audioTracks = player.getAudioTracks();
            
            audioMenu.innerHTML = '';
            
            if (audioTracks && audioTracks.length > 0) {
                audioTracks.forEach(function(track, index) {
                    const option = document.createElement('div');
                    option.className = 'track-option';
                    option.textContent = track.name || `مسار صوتي ${index + 1}`;
                    option.dataset.index = index;
                    
                    if (index === player.getCurrentAudioTrack()) {
                        option.classList.add('active');
                    }
                    
                    audioMenu.appendChild(option);
                });
            } else {
                const noTracks = document.createElement('div');
                noTracks.className = 'track-option';
                noTracks.textContent = 'لا توجد مسارات صوتية متاحة';
                noTracks.dataset.index = -1;
                audioMenu.appendChild(noTracks);
            }
        }

        function updateSubtitleTracks() {
            const subtitleMenu = document.getElementById('subtitleMenu');
            const subtitleTracks = player.getCaptionsList();
            
            subtitleMenu.innerHTML = '';
            
            // خيار إيقاف الترجمة
            const offOption = document.createElement('div');
            offOption.className = 'track-option';
            offOption.textContent = 'إيقاف الترجمة';
            offOption.dataset.index = -1;
            if (player.getCurrentCaptions() === -1) {
                offOption.classList.add('active');
            }
            subtitleMenu.appendChild(offOption);
            
            if (subtitleTracks && subtitleTracks.length > 0) {
                subtitleTracks.forEach(function(track, index) {
                    const option = document.createElement('div');
                    option.className = 'track-option';
                    option.textContent = track.label || `ترجمة ${index + 1}`;
                    option.dataset.index = index;
                    
                    if (index === player.getCurrentCaptions()) {
                        option.classList.add('active');
                    }
                    
                    subtitleMenu.appendChild(option);
                });
            } else {
                const noTracks = document.createElement('div');
                noTracks.className = 'track-option';
                noTracks.textContent = 'لا توجد ترجمات متاحة';
                noTracks.dataset.index = -2;
                subtitleMenu.appendChild(noTracks);
            }
        }
    </script>
</body>
</html>
